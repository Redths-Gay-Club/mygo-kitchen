import{H as Ee,g as we}from"../chunks/BKFMAIYu.js";import{b as le,a as F,t as J}from"../chunks/CJBrv6R2.js";import{t as E,a as I,c as Te}from"../chunks/DVkC9yNa.js";import{K as pe,n as Ae,N as V,t as D,J as Se,M as Re,g as k,aa as Me,O as Be,P as ce,Q as Y,v as z,aj as He,R as ge,p as _e,V as De,aw as j,an as me,f as ve,ax as oe,a1 as Ne,s as de,ay as Q,az as Pe,am as ze,aA as Oe,r as We,aB as U,aC as Fe,ah as Le,j as Xe,Y as qe,aD as he,aE as Ge,D as S,I as y,w as b,x as m,G as A,C as O,H as R,u as be,F as xe,c as L,aq as Z,aF as Ve}from"../chunks/DsNwAXZ1.js";import{p as K,i as ke,b as ue,c as Ye}from"../chunks/DMOy5E2y.js";import{d as N,s as M,e as je,r as Je}from"../chunks/Be6DEuNs.js";import{p as Ce}from"../chunks/1mWM_Woo.js";function Ke(n,e){return e}function Qe(n,e,t,a){for(var r=[],s=e.length,i=0;i<s;i++)Pe(e[i].e,r,!0);var v=s>0&&r.length===0&&t!==null;if(v){var g=t.parentNode;ze(g),g.append(t),a.clear(),H(n,e[0].prev,e[s-1].next)}Oe(r,()=>{for(var o=0;o<s;o++){var _=e[o];v||(a.delete(_.k),H(n,_.prev,_.next)),We(_.e,!v)}})}function $(n,e,t,a,r,s=null){var i=n,v={items:new Map,first:null},g=(e&he)!==0;if(g){var o=n;i=D?V(Se(o)):o.appendChild(pe())}D&&Re();var _=null,p=!1,d=Me(()=>{var h=t();return Xe(h)?h:h==null?[]:me(h)});Ae(()=>{var h=k(d),c=h.length;if(p&&c===0)return;p=c===0;let T=!1;if(D){var w=i.data===Be;w!==(c===0)&&(i=ce(),V(i),Y(!1),T=!0)}if(D){for(var u=null,C,x=0;x<c;x++){if(z.nodeType===8&&z.data===He){i=z,T=!0,Y(!1);break}var l=h[x],f=a(l,x);C=ye(z,v,u,null,l,f,x,r,e,t),v.items.set(f,C),u=C}c>0&&V(ce())}D||Ue(h,v,i,r,e,a,t),s!==null&&(c===0?_?ge(_):_=_e(()=>s(i)):_!==null&&De(_,()=>{_=null})),T&&Y(!0),k(d)}),D&&(i=z)}function Ue(n,e,t,a,r,s,i){var ae,ne,re,se;var v=(r&Ge)!==0,g=(r&(U|Q))!==0,o=n.length,_=e.items,p=e.first,d=p,h,c=null,T,w=[],u=[],C,x,l,f;if(v)for(f=0;f<o;f+=1)C=n[f],x=s(C,f),l=_.get(x),l!==void 0&&((ae=l.a)==null||ae.measure(),(T??(T=new Set)).add(l));for(f=0;f<o;f+=1){if(C=n[f],x=s(C,f),l=_.get(x),l===void 0){var X=d?d.e.nodes_start:t;c=ye(X,e,c,c===null?e.first:c.next,C,x,f,a,r,i),_.set(x,c),w=[],u=[],d=c.next;continue}if(g&&Ze(l,C,f,r),l.e.f&j&&(ge(l.e),v&&((ne=l.a)==null||ne.unfix(),(T??(T=new Set)).delete(l))),l!==d){if(h!==void 0&&h.has(l)){if(w.length<u.length){var W=u[0],B;c=W.prev;var te=w[0],q=w[w.length-1];for(B=0;B<w.length;B+=1)fe(w[B],W,t);for(B=0;B<u.length;B+=1)h.delete(u[B]);H(e,te.prev,q.next),H(e,c,te),H(e,q,W),d=W,c=q,f-=1,w=[],u=[]}else h.delete(l),fe(l,d,t),H(e,l.prev,l.next),H(e,l,c===null?e.first:c.next),H(e,c,l),c=l;continue}for(w=[],u=[];d!==null&&d.k!==x;)d.e.f&j||(h??(h=new Set)).add(d),u.push(d),d=d.next;if(d===null)continue;l=d}w.push(l),c=l,d=l.next}if(d!==null||h!==void 0){for(var P=h===void 0?[]:me(h);d!==null;)d.e.f&j||P.push(d),d=d.next;var G=P.length;if(G>0){var Ie=r&he&&o===0?t:null;if(v){for(f=0;f<G;f+=1)(re=P[f].a)==null||re.measure();for(f=0;f<G;f+=1)(se=P[f].a)==null||se.fix()}Qe(e,P,Ie,_)}}v&&qe(()=>{var ie;if(T!==void 0)for(l of T)(ie=l.a)==null||ie.apply()}),ve.first=e.first&&e.first.e,ve.last=c&&c.e}function Ze(n,e,t,a){a&U&&oe(n.v,e),a&Q?oe(n.i,t):n.i=t}function ye(n,e,t,a,r,s,i,v,g,o){var _=(g&U)!==0,p=(g&Fe)===0,d=_?p?Ne(r):de(r):r,h=g&Q?de(i):i,c={i:h,v:d,k:s,a:null,e:null,prev:t,next:a};try{return c.e=_e(()=>v(n,d,h,o),D),c.e.prev=t&&t.e,c.e.next=a&&a.e,t===null?e.first=c:(t.next=c,t.e.next=c.e),a!==null&&(a.prev=c,a.e.prev=c.e),c}finally{}}function fe(n,e,t){for(var a=n.next?n.next.e.nodes_start:t,r=e?e.e.nodes_start:t,s=n.e.nodes_start;s!==a;){var i=Le(s);r.before(s),s=i}}function H(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function $e(n,e){throw new Ee(n,e)}new TextEncoder;const et=!1,tt=()=>(le.game||(we("/"),$e(404,"no game data")),{game:le.game}),Gt=Object.freeze(Object.defineProperty({__proto__:null,load:tt,ssr:et},Symbol.toStringTag,{value:"Module"}));function at(n,e){e.game.sendPacket({action:"start"})}var nt=E('<div class="svelte-1s50cua"><h1 class="svelte-1s50cua">MyGo 廚房</h1> <button type="button" class="svelte-1s50cua">開始遊戲</button></div>');function rt(n,e){S(e,!0);const t=O(()=>!(e.game.judge===e.game.username&&e.game.players.length>=2));var a=nt(),r=y(b(a),2);r.__click=[at,e],m(a),A(()=>r.disabled=k(t)),I(n,a),R()}N(["click"]);var st=E('<button type="button" class="svelte-1xg36a9"> </button>'),it=E('<div class="svelte-1xg36a9"><h1 class="svelte-1xg36a9">選一個句子</h1> <!></div>');function lt(n,e){S(e,!0);function t(s){e.game.sendPacket({action:"choose_sentence",sentenceIndex:s})}var a=it(),r=y(b(a),2);$(r,17,()=>e.stage.sentences,Ke,(s,i,v)=>{var g=st();g.__click=()=>t(v);var o=b(g,!0);m(g),A(_=>M(o,_),[()=>k(i).replace("{}","____")]),I(s,g)}),m(a),I(n,a),R()}N(["click"]);var ct=E('<div class="svelte-hbsuio"><h1 class="svelte-hbsuio">等待關主選擇句子...</h1></div>');function vt(n,e){var t=ct();I(n,t)}var ot=(n,e)=>e(-1),dt=(n,e)=>e(1),ut=E('<button class="left-arrow svelte-1fiiii9"></button> <button class="right-arrow svelte-1fiiii9"></button>',1),ft=E('<button class="image svelte-1fiiii9" type="button"><img class="small svelte-1fiiii9" alt="gay"></button>'),gt=E('<div class="carousel svelte-1fiiii9"><div class="upper svelte-1fiiii9"><img class="large svelte-1fiiii9" alt="gay"> <!></div> <div class="mask svelte-1fiiii9"><div class="list svelte-1fiiii9"></div></div></div>');function ee(n,e){S(e,!0);let t=K(e,"selectedIndex",15,0),a=K(e,"controllable",3,!0),r,s;a()||be(()=>v());function i(u){t(u),v()}function v(){const u=r.getBoundingClientRect().width/2,C=s.children[t()].firstChild,x=C.getBoundingClientRect().width/2,l=s.getBoundingClientRect().x,f=C.getBoundingClientRect().x,X=l-f+u-x;s.style.transform=`translateX(${X}px)`}function g(u){u===0&&i(0)}function o(u){const C=s.children.length;i((t()+u+C)%C)}var _=gt(),p=b(_),d=b(p),h=y(d,2);{var c=u=>{var C=ut(),x=xe(C);x.__click=[ot,o],x.textContent="<";var l=y(x,2);l.__click=[dt,o],l.textContent=">",I(u,C)};ke(h,u=>{a()&&u(c)})}m(p);var T=y(p,2),w=b(T);$(w,22,()=>e.images,u=>u,(u,C,x)=>{var l=ft();l.__click=()=>i(k(x));var f=b(l);m(l),A(()=>{l.disabled=!a(),F(f,"src",C),J(f,"not-selected",t()!==k(x))}),je("load",f,()=>g(k(x))),Je(f),I(u,l)}),m(w),ue(w,u=>s=u,()=>s),m(T),ue(T,u=>r=u,()=>r),m(_),A(()=>F(d,"src",e.images[t()])),I(n,_),R()}N(["click"]);function _t(n,e,t){e.game.sendPacket({action:"choose_card",cardPoolIndex:k(t)})}var mt=E('<div id="main" class="svelte-18vgf4f"><h1> </h1> <!> <button type="button">提交</button></div>');function ht(n,e){S(e,!0);let t=Z(0);var a=mt(),r=b(a),s=b(r,!0);m(r);var i=y(r,2);const v=O(()=>e.stage.cards.map(o=>o.image));ee(i,{get images(){return k(v)},get selectedIndex(){return k(t)},set selectedIndex(o){L(t,Ce(o))}});var g=y(i,2);g.__click=[_t,e,t],m(a),A(o=>M(s,o),[()=>e.stage.sentence.replace("{}",e.stage.cards[k(t)].text)]),I(n,a),R()}N(["click"]);var bt=E('<div class="svelte-gly1v3"><h2 class="svelte-gly1v3">等待玩家選擇圖片...</h2> <h1 class="svelte-gly1v3"> </h1></div>');function xt(n,e){S(e,!0);var t=bt(),a=y(b(t),2),r=b(a,!0);m(a),m(t),A(()=>M(r,e.stage.progress)),I(n,t),R()}function kt(n,e,t){e.game.sendPacket({action:"choose_best_card",cardIndex:k(t)})}var Ct=E('<div id="main" class="svelte-18vgf4f"><h1> </h1> <!> <button type="button">提交</button></div>');function yt(n,e){S(e,!0);let t=Z(0);be(()=>{e.game.sendPacket({action:"judge_select_card",cardIndex:k(t)})});var a=Ct(),r=b(a),s=b(r,!0);m(r);var i=y(r,2);const v=O(()=>e.stage.cards.map(o=>o.image));ee(i,{get images(){return k(v)},get selectedIndex(){return k(t)},set selectedIndex(o){L(t,Ce(o))}});var g=y(i,2);g.__click=[kt,e,t],m(a),A(o=>M(s,o),[()=>e.stage.sentence.replace("{}",e.stage.cards[k(t)].text)]),I(n,a),R()}N(["click"]);var It=E('<div class="svelte-1hj9zoa"><h1> </h1> <h1> </h1> <img class="svelte-1hj9zoa"></div>');function Et(n,e){S(e,!0);var t=It(),a=b(t),r=b(a);m(a);var s=y(a,2),i=b(s,!0);m(s);var v=y(s,2);m(t),A(g=>{M(r,`Winner: ${e.stage.winner??""}`),M(i,g),F(v,"src",e.stage.bestCard.image),F(v,"alt",e.stage.bestCard.text)},[()=>e.stage.sentence.replace("{}",e.stage.bestCard.text)]),I(n,t),R()}var wt=E('<div id="main" class="svelte-18vgf4f"><h1> </h1> <!> <h1>等待關主作出選擇...</h1></div>');function Tt(n,e){S(e,!0);let t=K(e,"stage",7);var a=wt(),r=b(a),s=b(r,!0);m(r);var i=y(r,2);const v=O(()=>t().cards.map(g=>g.image));ee(i,{get images(){return k(v)},controllable:!1,get selectedIndex(){return t().selected},set selectedIndex(g){t().selected=g}}),Ve(2),m(a),A(()=>M(s,t().sentence)),I(n,a),R()}function pt(n,e){S(e,!0);const t={start:rt,choose_sentence:lt,wait_for_sentence:vt,choose_card:ht,wait_for_card:xt,choose_best_card:yt,wait_for_best_card:Tt,end:Et};let a=O(()=>t[e.game.screen.name]);var r=Te(),s=xe(r);Ye(s,()=>k(a),(i,v)=>{v(i,{get game(){return e.game},get stage(){return e.game.screen}})}),I(n,r),R()}function At(n,e,t){L(e,!1),navigator.clipboard.writeText(t.content),setTimeout(()=>L(e,!0),1)}var St=E('<button class="svelte-156rmmz"><img alt="Copy" src="/copy.png" class="svelte-156rmmz"> <img class="check svelte-156rmmz" alt="Check" src="/check.png"></button>');function Rt(n,e){let t=Z(!1);var a=St();a.__click=[At,t,e];var r=b(a),s=y(r,2);m(a),A(()=>{J(r,"animate-copy",k(t)),J(s,"animate-check",k(t))}),I(n,a)}N(["click"]);var Mt=E("<span>[Judge]</span>"),Bt=E('<div class="player-card svelte-xc13fk"><div class="user-icon"></div> <span> </span> <!></div>'),Ht=E('<div class="sidebar svelte-xc13fk"><h1 class="svelte-xc13fk"> <!></h1> <hr class="svelte-xc13fk"> <div class="list svelte-xc13fk"></div></div>');function Dt(n,e){S(e,!0);var t=Ht(),a=b(t),r=b(a),s=y(r);Rt(s,{get content(){return e.game.id}}),m(a);var i=y(a,4);$(i,21,()=>e.game.players,v=>v.name,(v,g)=>{var o=Bt(),_=y(b(o),2),p=b(_,!0);m(_);var d=y(_,2);{var h=c=>{var T=Mt();I(c,T)};ke(d,c=>{e.game.judge===k(g).name&&c(h)})}m(o),A(()=>M(p,k(g).name)),I(v,o)}),m(i),m(t),A(()=>M(r,`房號 ${e.game.id??""}`)),I(n,t),R()}var Nt=E('<div class="svelte-ryu4g"><!> <!></div>');function Pt(n,e){var t=Nt(),a=b(t);Dt(a,{get game(){return e.game}});var r=y(a,2);pt(r,{get game(){return e.game}}),m(t),I(n,t)}function Vt(n,e){S(e,!0),Pt(n,{get game(){return e.data.game}}),R()}export{Vt as component,Gt as universal};
